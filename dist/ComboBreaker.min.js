/*! ComboBreaker - v0.2.0 - 2012-11-24
* https://github.com/Problematic/ComboBreaker
* Copyright (c) 2012 Derek Stobbe; Licensed MIT */
(function(e){"use strict";var t=function(n,r,i){var s=this,o=0,u=null;if(!(this instanceof t))return new t(n,r,i);typeof r=="function"&&(r={success:r}),this.callbacks=r,this.options=e.extend({},{keyMap:{enter:13,esc:27,left:37,up:38,right:39,down:40},resetTime:1e3,resetOnMistake:!0,target:document},i),this.combo=n,this._keyEventCallback=function(e){var t=s.options.keyMap[s.combo[o]]||s.combo[o].toUpperCase().charCodeAt();clearTimeout(u);if(e.which===t){s.callbacks.step&&s.callbacks.step(s.combo,s.combo[o]);if(o===s.combo.length-1){s.callbacks.success(s.combo,s.combo[o]),o=0;return}o++,u=setTimeout(function(){o=0,s.callbacks.timeout&&s.callbacks.timeout(s.combo,s.combo[o])},s.options.resetTime)}else o>0&&s.options.resetOnMistake===!0&&(o=0,s.callbacks.mistake&&s.callbacks.mistake(s.combo,s.combo[o]))},e(this.options.target).keyup(this._keyEventCallback)};t.prototype.tearDown=function(){e(this.options.target).unbind("keyup",this._keyEventCallback)},window.ComboBreaker=t,typeof define=="function"&&define(t)})(window.jQuery);