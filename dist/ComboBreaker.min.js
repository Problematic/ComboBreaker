/*! ComboBreaker - v0.2.1 - 2012-11-24
* https://github.com/Problematic/ComboBreaker
* Copyright (c) 2012 Derek Stobbe; Licensed MIT */
(function(e){"use strict";var t=function(n,r,i){var s=this;if(!(this instanceof t))return new t(n,r,i);typeof r=="function"&&(r={success:r}),this.callbacks=r,this.options=e.extend({},{keyMap:{enter:13,esc:27,left:37,up:38,right:39,down:40},resetTime:1e3,resetOnMistake:!0,target:document},i),this.combo=n,this._timeout=null,this._index=0,this._keyEventCallback=function(e){var t=s.options.keyMap[s.combo[s._index]]||s.combo[s._index].toUpperCase().charCodeAt();clearTimeout(s._timeout);if(e.which===t){s.callbacks.step&&s.callbacks.step(s.combo,s.combo[s._index]);if(s._index===s.combo.length-1){s.callbacks.success(s.combo,s.combo[s._index]),s._index=0;return}s._index++,s._timeout=setTimeout(function(){s._index=0,s.callbacks.timeout&&s.callbacks.timeout(s.combo,s.combo[s._index])},s.options.resetTime)}else s._index>0&&s.options.resetOnMistake===!0&&(s._index=0,s.callbacks.mistake&&s.callbacks.mistake(s.combo,s.combo[s._index]))},e(this.options.target).keyup(this._keyEventCallback)};t.prototype.tearDown=function(){clearTimeout(this._timeout),this._index=0,e(this.options.target).unbind("keyup",this._keyEventCallback)},window.ComboBreaker=t,typeof define=="function"&&define(t)})(window.jQuery);